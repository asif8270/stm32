/*
 * i2c.c
 *
 *  Created on: Sep 24, 2024
 *      Author: Asif
 */

#include <stdint.h>
#include "stm32f4xx.h"
#include "i2c.h"

void GPIO_Init(void)
{
	/*PB6 -> SCL
	 *PB7 -> SDA */

	/*Enable clock access to GPIOB*/
	RCC->AHB1ENR |= GPIOB_EN;

	/*Set PB6 and PB7 output mode to alternate function*/
	/*PB6*/
	GPIOB->MODER &= ~(1U<<12);
	GPIOB->MODER |=  (1U<<13);

	/*PB7*/
	GPIOB->MODER &= ~(1U<<14);
	GPIOB->MODER |=  (1U<<15);

	/*Set PB6 and PB7 pins output to open drain mode*/
	GPIOB->OTYPER |= ((1U<<6)|(1U<<7));

	/*Set pull-up for PB6 and PB7 pins*/
	/*PB6*/
	GPIOB->PUPDR |=  (1U<<12);
	GPIOB->PUPDR &= ~(1U<<13);

	/*PB7*/
	GPIOB->PUPDR |=  (1U<<14);
	GPIOB->PUPDR &= ~(1U<<15);

}

void I2C1_Init(void)
{

}
